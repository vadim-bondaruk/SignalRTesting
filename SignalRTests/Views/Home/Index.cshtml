
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>
<link href="~/Content/Popup.css" rel="stylesheet" />
<hr />

<input type="text" id="text" />
<button id="button">Send</button>
<br />
<hr />
<ul id="ul"></ul>

@section scripts
    {
        
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery.signalR-2.1.2.js"></script>
<script src="~/signalr/hubs"></script>
<script>
    $(document).ready(function(){
        //Скрыть PopUp при загрузке страницы
        PopUpHide();
    });
    //Функция отображения PopUp
    function PopUpShow(){
        $("#popup1").show();
    }
    //Функция скрытия PopUp
    function PopUpHide(){
        $("#user_popup").hide();
    }
</script>
<script>
    $(function () {

        hub = $.connection.myHub;

        hub.client.hello = function (message) {
            $("#popup_message").empty().append(message);
            $("#user_popup").show();
        }

        $.connection.hub.start().done(function () {

            $('#button').click(function () {
               
                hub.server.hello($("#text").val());
            });
        });
    });
    </script>

    }
@section popup
{
<div class="popup" id="user_popup" style="display:none">
    <div class="popup-content">
        <div class="popup_message_container">
        <div id="popup_message"></div> 
            </div>
        <div class="popup_button">
            <button id="popup_close" onclick="javascript:PopUpHide()">Закрыть</button>
        </div>      
        
    </div>
    
       
    
</div>
}